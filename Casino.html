<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tt_toastie‚Äôs DonutSMP Casino Helper</title>
<style>
body {margin:0;font-family:Poppins,sans-serif;background:#120005;color:#fff;display:flex;flex-direction:column;align-items:center;min-height:100vh;}
header {width:100%;padding:15px 10px;text-align:center;background:#22000a;}
h1 {margin:0;color:#ffd700;text-shadow:0 0 8px #ffae00;}
.owner {margin-top:4px;color:#00ffcc;font-weight:700;}
main {width:100%;max-width:1200px;padding:10px;display:flex;flex-wrap:wrap;gap:15px;justify-content:center;}
.game-card {background:rgba(255,255,255,0.05);padding:15px;border-radius:10px;flex:1 1 320px;min-width:280px;position:relative;}
input, select {padding:6px 10px;border-radius:6px;border:none;margin:4px 0;width:100%;}
button {background:linear-gradient(90deg,#ffd700,#ffae00);border:none;padding:8px 14px;border-radius:8px;font-weight:800;cursor:pointer;margin-top:6px;width:100%;}
#result {margin-top:12px;font-weight:700;color:#00ff66;word-break:break-word;}
canvas {width:100%;height:auto;border-radius:10px;margin-top:10px;}
.history {margin-top:10px;font-size:0.85rem;color:#ccc;max-height:150px;overflow-y:auto;}
.confetti-piece {position:absolute;width:8px;height:8px;background:gold;border-radius:50%;pointer-events:none;}
</style>
</head>
<body>

<header>
  <h1>üé∞ tt_toastie‚Äôs DonutSMP Casino Helper</h1>
  <div class="owner">Owner: <span id="ownerName">robisrobot</span> (Casino Owner IGN)</div>
</header>

<main>
  <div class="game-card">
    <label>Player Name</label>
    <input id="playerName" placeholder="Minecraft Username">

    <label>Bet Amount</label>
    <input id="betAmount" type="number" placeholder="Amount" min="1">

    <label>Choose Game</label>
    <select id="gameSelect">
      <option value="roulette">üé° Roulette Wheel</option>
      <option value="coin">ü™ô Coin Flip</option>
      <option value="dice">üé≤ Dice</option>
      <option value="slot">üé∞ Slots</option>
      <option value="blackjack">üÉè Blackjack</option>
    </select>

    <div id="colorChoice" style="display:none;">
      <label>Choose Color</label>
      <select id="colorBet">
        <option value="red">üî¥ Red</option>
        <option value="black">‚ö´ Black</option>
        <option value="green">üü¢ Green</option>
      </select>
    </div>

    <button id="playBtn">Play / Spin</button>
    <div id="result"></div>
    <div class="history" id="history"></div>
  </div>

  <div class="game-card" id="wheelCard" style="display:none;">
    <canvas id="rouletteWheel" width="400" height="400"></canvas>
  </div>

  <div class="game-card" id="blackjackCard" style="display:none;">
    <canvas id="blackjackCanvas" width="400" height="300"></canvas>
    <div style="margin-top:10px;">
      <button id="hitBtn" disabled>Hit</button>
      <button id="standBtn" disabled>Stand</button>
    </div>
  </div>
</main>

<script>
// ---------- Utilities ----------
const resultDiv = document.getElementById('result');
const historyDiv = document.getElementById('history');
const wheelCard = document.getElementById('wheelCard');
const colorChoice = document.getElementById('colorChoice');
const rouletteCanvas = document.getElementById('rouletteWheel');
const ctx = rouletteCanvas.getContext('2d');
const owner = document.getElementById('ownerName').textContent;
const blackjackCard = document.getElementById('blackjackCard');
const bjCanvas = document.getElementById('blackjackCanvas');
const bjCtx = bjCanvas.getContext('2d');
const hitBtn = document.getElementById('hitBtn');
const standBtn = document.getElementById('standBtn');
const gameSelect = document.getElementById('gameSelect');

let deck = [];
let playerCards = [];
let dealerCards = [];

// Confetti
function createConfetti(){
  for(let i=0;i<50;i++){
    const c = document.createElement('div');
    c.classList.add('confetti-piece');
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.top='-10px';
    document.body.appendChild(c);
    animateConfetti(c);
  }
}
function animateConfetti(el){
  let posY = -10;
  const speed = 2+Math.random()*3;
  const sway = Math.random()*2*Math.PI;
  function frame(){
    posY+=speed;
    el.style.top=posY+'px';
    el.style.left=(parseFloat(el.style.left)+Math.sin(posY/10+sway)*2)+'px';
    if(posY<window.innerHeight){requestAnimationFrame(frame)}
    else{el.remove();}
  }
  frame();
}

// ---------- Roulette ----------
const segments = [
  {color:'red', label:'1'}, {color:'black', label:'2'},
  {color:'red', label:'3'}, {color:'black', label:'4'},
  {color:'green', label:'0'}
];

function drawWheel(rotation=0){
  const cx=rouletteCanvas.width/2,cy=rouletteCanvas.height/2,radius=cx-10;
  ctx.clearRect(0,0,rouletteCanvas.width,rouletteCanvas.height);
  const arc = (2*Math.PI)/segments.length;
  for(let i=0;i<segments.length;i++){
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,radius,i*arc+rotation,(i+1)*arc+rotation);
    ctx.fillStyle=segments[i].color;
    ctx.fill();
    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(i*arc+arc/2+rotation);
    ctx.fillStyle='gold';
    ctx.textAlign='right';
    ctx.font='bold 16px sans-serif';
    ctx.fillText(segments[i].label,radius-10,6);
    ctx.restore();
  }
  // Arrow
  ctx.beginPath();
  ctx.moveTo(cx-10,10);
  ctx.lineTo(cx+10,10);
  ctx.lineTo(cx,30);
  ctx.fillStyle='white';
  ctx.fill();
}

// ---------- Other Games ----------
function spinSlots(){
  return new Promise(resolve=>{
    const symbols=['üçí','üçã','üîî','‚≠ê','üíé'];
    const reels = [0,0,0];
    let count=0;
    const interval = setInterval(()=>{
      reels[0]=symbols[Math.floor(Math.random()*symbols.length)];
      reels[1]=symbols[Math.floor(Math.random()*symbols.length)];
      reels[2]=symbols[Math.floor(Math.random()*symbols.length)];
      resultDiv.innerHTML=`üé∞ ${reels.join(' | ')}`;
      count++;
      if(count>15){clearInterval(interval);resolve(reels);}
    },80);
  });
}
function flipCoin(){
  return new Promise(resolve=>{
    let count=0;
    const interval = setInterval(()=>{
      resultDiv.textContent = (Math.random()<0.5?'ü™ô Heads':'ü™ô Tails');
      count++;
      if(count>10){clearInterval(interval);resolve(Math.random()<0.5);}
    },80);
  });
}
function rollDice(){
  return new Promise(resolve=>{
    let count=0;
    const interval = setInterval(()=>{
      const val = Math.floor(Math.random()*6)+1;
      resultDiv.textContent=`üé≤ Dice: ${val}`;
      count++;
      if(count>10){clearInterval(interval);resolve(val>=4);}
    },80);
  });
}

// ---------- Blackjack ----------
function createDeck(){
  const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
  const ranks = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
  deck = [];
  for(const s of suits){for(const r of ranks){deck.push({suit:s,rank:r});}}
  for(let i=deck.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[deck[i],deck[j]]=[deck[j],deck[i]];}
}
function drawCard(ctx, card, x, y){
  ctx.fillStyle='white';
  ctx.fillRect(x,y,60,90);
  ctx.fillStyle='black';
  ctx.font='16px sans-serif';
  ctx.fillText(card.rank+card.suit,x+5,y+20);
  ctx.strokeRect(x,y,60,90);
}
function renderBlackjack(){
  bjCtx.clearRect(0,0,bjCanvas.width,bjCanvas.height);
  playerCards.forEach((c,i)=>drawCard(bjCtx,c,50+i*70,180));
  dealerCards.forEach((c,i)=>drawCard(bjCtx,c,50+i*70,20));
}
function cardValue(card){if(['J','Q','K'].includes(card.rank))return 10;if(card.rank==='A')return 11;return parseInt(card.rank);}
function handValue(cards){let total=cards.reduce((sum,c)=>sum+cardValue(c),0);let aceCount=cards.filter(c=>c.rank==='A').length;while(total>21&&aceCount>0){total-=10;aceCount--;}return total;}
function startBlackjack(player, betAmount){
  createDeck();
  playerCards=[deck.pop(),deck.pop()];
  dealerCards=[deck.pop(),deck.pop()];
  renderBlackjack();
  hitBtn.disabled=false;
  standBtn.disabled=false;

  hitBtn.onclick = () => {
    playerCards.push(deck.pop());
    renderBlackjack();
    if(handValue(playerCards)>21){ endBlackjack(false,player,betAmount); }
  };
  standBtn.onclick = () => {
    while(handValue(dealerCards)<17){ dealerCards.push(deck.pop()); renderBlackjack(); }
    const playerWin = handValue(playerCards)<=21 && handValue(playerCards)>handValue(dealerCards) || handValue(dealerCards)>21;
    endBlackjack(playerWin,player,betAmount);
  };
}
function endBlackjack(win,player,betAmount){
  hitBtn.disabled=true;
  standBtn.disabled=true;
  if(win){resultDiv.style.color='#00ff66'; resultDiv.innerHTML=`üéâ WIN! /pay ${player} ${betAmount*2}`; createConfetti(); historyDiv.innerHTML=`${player} won ${betAmount*2}<br>`+historyDiv.innerHTML;}
  else{resultDiv.style.color='#ff3333'; resultDiv.innerHTML=`üíÄ LOSE! Do NOT pay the player`; historyDiv.innerHTML=`${player} lost ${betAmount}<br>`+historyDiv.innerHTML;}
}

// ---------- Roulette spin ----------
function spinRoulette(colorBet, player, betAmount){
  return new Promise(resolve=>{
    const targetIdx = Math.floor(Math.random()*segments.length);
    const totalRotation = 2*Math.PI*6 + targetIdx*(2*Math.PI/segments.length);
    const duration=3000;
    const start=performance.now();
    function animate(time){
      let progress = (time-start)/duration;
      if(progress>1) progress=1;
      let easeOut = 1-Math.pow(1-progress,3);
      drawWheel(totalRotation*easeOut);
      if(progress<1) requestAnimationFrame(animate);
      else{
        const win = segments[targetIdx].color === colorBet;
        resolve(win);
      }
    }
    requestAnimationFrame(animate);
  });
}

// ---------- Game select ----------
gameSelect.addEventListener('change',()=>{
  if(gameSelect.value==='roulette'){ wheelCard.style.display='block'; colorChoice.style.display='block'; blackjackCard.style.display='none'; drawWheel(); }
  else if(gameSelect.value==='blackjack'){ blackjackCard.style.display='block'; wheelCard.style.display='none'; colorChoice.style.display='none'; }
  else{ wheelCard.style.display='none'; colorChoice.style.display='none'; blackjackCard.style.display='none'; }
});

// ---------- Play Button ----------
document.getElementById('playBtn').addEventListener('click',async ()=>{
  const player = document.getElementById('playerName').value.trim();
  const betAmount = parseInt(document.getElementById('betAmount').value);
  if(!player || isNaN(betAmount)||betAmount<1){ resultDiv.style.color='red'; resultDiv.textContent='Enter valid player and bet'; return;}
  const game = gameSelect.value;

  resultDiv.style.color='#00ffcc'; resultDiv.textContent='Playing...';

  if(game==='roulette'){
    const colorBet = document.getElementById('colorBet').value;
    const won = await spinRoulette(colorBet,player,betAmount);
    if(won){ resultDiv.style.color='#00ff66'; resultDiv.innerHTML=`üéâ WIN! /pay ${player} ${betAmount*2}`; createConfetti(); historyDiv.innerHTML=`${player} won ${betAmount*2}<br>`+historyDiv.innerHTML;}
    else{ resultDiv.style.color='#ff3333'; resultDiv.innerHTML=`üíÄ LOSE! Do NOT pay the player`; historyDiv.innerHTML=`${player} lost ${betAmount}<br>`+historyDiv.innerHTML;}
  } else if(game==='coin'){
    const won = await flipCoin();
    if(won){ resultDiv.style.color='#00ff66'; resultDiv.innerHTML=`üéâ WIN! /pay ${player} ${betAmount*2}`; createConfetti(); historyDiv.innerHTML=`${player} won ${betAmount*2}<br>`+historyDiv.innerHTML;}
    else{ resultDiv.style.color='#ff3333'; resultDiv.innerHTML=`üíÄ LOSE! Do NOT pay the player`; historyDiv.innerHTML=`${player} lost ${betAmount}<br>`+historyDiv.innerHTML;}
  } else if(game==='dice'){
    const won = await rollDice();
    if(won){ resultDiv.style.color='#00ff66'; resultDiv.innerHTML=`üéâ WIN! /pay ${player} ${betAmount*2}`; createConfetti(); historyDiv.innerHTML=`${player} won ${betAmount*2}<br>`+historyDiv.innerHTML;}
    else{ resultDiv.style.color='#ff3333'; resultDiv.innerHTML=`üíÄ LOSE! Do NOT pay the player`; historyDiv.innerHTML=`${player} lost ${betAmount}<br>`+historyDiv.innerHTML;}
  } else if(game==='slot'){
    const reels = await spinSlots();
    const won = (reels[0]===reels[1] && reels[1]===reels[2]);
    if(won){ resultDiv.style.color='#00ff66'; resultDiv.innerHTML=`üéâ WIN! /pay ${player} ${betAmount*2}`; createConfetti(); historyDiv.innerHTML=`${player} won ${betAmount*2}<br>`+historyDiv.innerHTML;}
    else{ resultDiv.style.color='#ff3333'; resultDiv.innerHTML=`üíÄ LOSE! Do NOT pay the player`; historyDiv.innerHTML=`${player} lost ${betAmount}<br>`+historyDiv.innerHTML;}
  } else if(game==='blackjack'){ startBlackjack(player,betAmount);}
});
</script>

</body>
</html>
